// Generated by CoffeeScript 1.4.0
(function(){var e,t,n,r=function(e,t){return function(){return e.apply(t,arguments)}};n=this;t=n.log;e=n.define;e(["jquery","touchable/touchable"],function(e,t){var i;n.isNumberDragging=!1;i=function(){function i(t,n){this.element=t;this.options=n;this.onTouchableUp=r(this.onTouchableUp,this);this.onTouchableMove=r(this.onTouchableMove,this);this.onTouchableDown=r(this.onTouchableDown,this);this.onMouseLeave=r(this.onMouseLeave,this);this.onMouseEnter=r(this.onMouseEnter,this);this.$ele=e(this.element).addClass("draggable-number");this.initializeHover();this.initializeHelp();this.initializeDrag();return}i.prototype.initializeHover=function(){this.isHovering=!1;this.$ele.on({mouseenter:this.onMouseEnter,mouseleave:this.onMouseLeave})};i.prototype.initializeHelp=function(){var t;t=this.$ele.is("input");this.$help=e('<div class="number-help">'+(t?"click or ":"")+"drag</div>");if(t){this.$ele.wrap('<span style="display: inline-block; position: relative;" />');this.$help.insertAfter(this.$ele).hide()}else this.$help.prependTo(this.$ele).hide()};i.prototype.initializeDrag=function(){this.isDragging=!1;this.touchable=new t(this.element);this.$ele.on({touchabledown:this.onTouchableDown,touchablemove:this.onTouchableMove,touchableup:this.onTouchableUp})};i.prototype.onMouseEnter=function(e){this.isHovering=!0;this.updateRollOver()};i.prototype.onMouseLeave=function(e){this.isHovering=!1;this.updateRollOver()};i.prototype.onTouchableDown=function(e,t){var r,i,s,o,u,a,f,l,c;this.min=(r=(i=this.$ele.attr("min"))!=null?i:(s=this.options)!=null?s.min:void 0)!=null?r:0;this.max=(o=(u=this.$ele.attr("max"))!=null?u:(a=this.options)!=null?a.max:void 0)!=null?o:1e100;this.step=(f=(l=this.$ele.attr("step"))!=null?l:(c=this.options)!=null?c.step:void 0)!=null?f:1;this.valStart=parseInt(this.$ele.val(),10);this.isDragging=n.isNumberDragging=!0;this.updateRollOver()};i.prototype.onTouchableMove=function(e,t){var n;n=parseInt(this.valStart,10)+t.translation.x/5*this.step;n=Math.min(Math.max(this.min,Math.round(n/this.step)*this.step),this.max);this.$ele.val(n).trigger("change");this.updateHelp()};i.prototype.onTouchableUp=function(e,t){var r;this.isDragging=n.isNumberDragging=!1;this.updateRollOver();this.$help.css("display",t.wasTap?"block":"none");((r=t.delta)!=null?r.x:void 0)===0&&this.valStart===parseInt(this.$ele.val(),10)&&this.$ele.select()};i.prototype.updateRollOver=function(){this.updateStyle();this.updateCursor();this.updateHelp()};i.prototype.isActive=function(){return!this.isDragging&&!n.isNumberDragging&&this.isHovering};i.prototype.updateStyle=function(){this.$ele.toggleClass("number-down",this.isDragging);this.$ele.toggleClass("number-hover",this.isActive())};i.prototype.updateCursor=function(){e("body").toggleClass("number-drag-cursor-h",this.isActive())};i.prototype.updateHelp=function(){var e,t,r,i,s;r=Math.round((this.$ele.outerWidth()-this.$help.width())/2);i=this.$ele.css("paddingTop");e=this.$ele.css("borderTopWidth");s=-this.$help.height()-(parseInt(i,10)+parseInt(e,10));t=this.isHovering&&!n.isNumberDragging?"block":"none";this.$help.css({display:t,left:r,top:s})};return i}();return i})}).call(this);